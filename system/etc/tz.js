export default async function({Umaru:e,event:t,moment:a,getUsers:s,writeThread:r,umaru:d}){const n=e.getCurrentUserID();var h=a.tz(d.data.threads[t.threadID].timeZone).format("MMM DD YYYY hh:mm:ss A"),o=Math.floor(Date.now()/36e5),D=Math.floor(Date.now()/864e5),I=Math.floor(Date.now()/2592e6);const i=await s(t.threadID);if(i[t.senderID]&&!i[t.senderID].timestamp||i[t.senderID]&&Date.now()-i[t.senderID].timestamp>36e5){if(i[t.senderID].timestamp=Date.now(),t.senderID==n)return i[n].lastActive="None/Bot",await r(d.systemPath+"/data/Threads/"+t.threadID+"/Users",i,!0);if(d.data.threads[t.threadID].adminIDs.includes(t.senderID))return i[t.senderID].lastActive="Administrator",await r(d.systemPath+"/data/Threads/"+t.threadID+"/Users",i,!0);if(d.data.threads[t.threadID].seenerType||(d.data.threads[t.threadID].seenerType=""),i[t.senderID].lastActive=h,"hours"==d.data.threads[t.threadID].seenerType){i[t.senderID].hours=parseInt(o);for(const e in i)delete i[e].months,delete i[e].days}else if("days"==d.data.threads[t.threadID].seenerType){i[t.senderID].days=parseInt(D);for(const e in i)delete i[e].hours,delete i[e].months}else if("months"==d.data.threads[t.threadID].seenerType){i[t.senderID].days=parseInt(D);for(const e in i)delete i[e].hours,delete i[e].days}else i[t.senderID].hours=parseInt(o),i[t.senderID].days=parseInt(D),i[t.senderID].months=parseInt(I);await r(d.systemPath+"/data/Threads/"+t.threadID+"/Users",i,!0)}}